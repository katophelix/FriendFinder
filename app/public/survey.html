<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder</title>
    <!-- Added link to the jQuery Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <!-- Added a link to Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
        crossorigin="anonymous">


</head>

<body>
    <div class="container">
        <!-- Jumbotron for Title -->
        <div class="jumbotron">
            <h1 id="message" class="text-center">Friend Finder</h1>
            <h2 id="instruction" class="text-center">On a scale of 1 to 5 (1 being strongly disagree and 5 being strongly agree) choose the best option that fits
                you for each question.</h2>
        </div>

        <div class="search-container">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-heart"></span> Survey Questions</div>
                <div class="panel-body">
                    <form>
                        <div class=“form-group”>
                            <h4>Name (Required)</h4>
                            <input type="text" id="name" class="form-control" required="">

                            <h4>Link to Photo Image (Required)</h4>
                            <input type="text" id="photo" class="form-control" required="">

                            <hr>
                            <br>
                            <div class="row">
                                <strong>Question 1</strong>
                                <br>
                                <h4>You can chatter all day to anyone.</h4>
                                <select class="questions-control" id="q1">
                                    <option></option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 2</strong>
                                <br>
                                <h4>Your favorite places have sand and water.</h4>
                                <select class="questions-control" id="q2">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 3</strong>
                                <br>
                                <h4>You prefer to be left alone.</h4>
                                <select class="questions-control" id="q3">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 4</strong>
                                <br>
                                <h4>You know everything there is to know about football.</h4>
                                <select class="questionsform-control" id="q4">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 5</strong>
                                <br>
                                <h4>You know everything there is to know about theatre.</h4>
                                <select class="questions-control" id="q5">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 6</strong>
                                <br>
                                <h4>You know everything there is to know about movies.</h4>
                                <select class="questions-control" id="q6">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 7</strong>
                                <br>
                                <h4>You love to go to the ballet.</h4>
                                <select class="questions-control" id="q7">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 8</strong>
                                <br>
                                <h4>You drive way too fast.</h4>
                                <select class="questionsform-control" id="q8">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 9</strong>
                                <br>
                                <h4>You love to travel.</h4>
                                <select class="questions-control" id="q9">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <div class="row">
                                <strong>Question 10</strong>
                                <br>
                                <h4>You think you know best, always.</h4>
                                <select class="questions-control" id="q10">
                                    <option></option>
                                    <option>1 </option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>

                                </select>
                            </div>
                            <br>
                            <br>
                            <br>

                            <!-- Submit Button -->
                            <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">
                                <i class="fa fa-check-circle" aria-hidden="true"></i>
                                Submit</button>

                            <hr>


                    </form>

                    </div>
                </div>
            </div>

            <footer class="footer">
                <div class="container">
                    <p>
                        <a href="/api/friends">API Friends List</a> |
                        <a href="https://github.com/katophelix/FriendFinder">GitHub Repo</a>
                    </p>
                </div>
            </footer>


            <!-- Trigger the modal with a button -->
            <!-- <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button> -->

            <!-- Modal -->
            <div id="myModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Best Match</h4>
                        </div>
                        <div class="modal-body">
                            <p>Some text in the modal.</p>
                            <h2 id="best-match-name"></h2>
                            <img id="best-match-img" src="" alt="">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">


        // Capture the form inputs
        $("#submit").on("click", function (event) {
            event.preventDefault();




            // Form validation
            function validateForm() {
                var isValid = true;
                $(".form-control").each(function () {
                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });

                $(".questions-control").each(function () {

                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });
                return isValid;
            }

            // If all required fields are filled
            if (validateForm()) {
                // Create an object for the user"s data
                var friendsArray = {
                    name: $("#name").val(),
                    photo: $("#photo").val(),
                    scores: [

                        parseInt($("#q1").val()),
                        parseInt($("#q2").val()),
                        parseInt($("#q3").val()),
                        parseInt($("#q4").val()),
                        parseInt($("#q5").val()),
                        parseInt($("#q6").val()),
                        parseInt($("#q7").val()),
                        parseInt($("#q8").val()),
                        parseInt($("#q9").val()),
                        parseInt($("#q10").val())

                    ]

                };
                console.log(friendsArray);
                // for (i = 0; i < friendsArray.length; i++) {
                //     console.log(i);
                // }

                // AJAX post the data to the friends API.
                $.post("/api/friends", friendsArray, function (data) {

                    // Grab the result from the AJAX post so that the best match's name and photo are displayed.
                    $("#best-match-name").text(data.name);
                    $("#best-match-img").attr("src", data.photo);

                    // Show the modal with the best match
                    $("#myModal").modal("toggle");

                });
            } else {
                alert("Please fill out all fields before submitting!");
            }
        });



    </script>
</body>

</html>